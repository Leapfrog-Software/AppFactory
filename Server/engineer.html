<html>
<head>
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta charset="utf-8">
  <title>アプリファクトリー</title>
  <link rel="shortcut icon" href="img/icon.png" type="image/png">
  <style>
    body {
      background: #fff;
    }
    body, div, span, td {
      margin: 0;
      padding: 0;
      font-family: "ヒラギノ角ゴ Pro", "Hiragino Kaku Gothic Pro",Lucida Grande,"メイリオ", Meiryo, Tahoma, Verdana, Osaka, "ＭＳ Ｐゴシック", "MS PGothic", sans-serif;
      font-size: 14px;
      color: #333;
    }
    a {
      text-decoration: none;
      color: #333;
    }

    input[type="text"] {
      border: 1px solid #ddd;
    }

    input[type="text"]:focus {
      outline: 0;
      border-color: orange;
    }

  </style>

  <script src="common.js"></script>
  <script type="text/javascript">

    var gPage = 0;
    var gKeyword = "";
    var gOrganization = 0;
    var gCost = 0;
    var gWork = 0;
    var gCountPerPage = 20;

    function fetch() {

      document.getElementById("contents_td").innerHTML = "　";

      var url = "srv.php?command=getengineers&page=" + gPage + "&keyword=" + btoa(unescape(encodeURIComponent(gKeyword))) + "&organization=" + gOrganization + "&cost=" + gCost + "&work=" + gWork;
      httpPost(url, null, function(data) {

        document.getElementById("contents_td").innerHTML = "<div style='width:90%;height:280px;color:#ccc;font-size:18px;margin:70px 0 0 40px'>該当するエンジニアが見つかりません</div>";

        var parsed = null;
        try {
          parsed = JSON.parse(data);
        } catch(e) {
          return;
        }
        if (!parsed) {
          return;
        }
        if ((parsed.page == null) || (parsed.total == null) || (parsed.engineers == null)) {
          return;
        }
        displayData(parsed.engineers, parsed.page, parsed.total);
      });
    }

    function displayData(engineerList, page, total) {

      var html = "<div style='height:50px'></div>";
      if (engineerList.length > 0) {
        html += "<div style='margin:20px 0 0 40px;font-size:12px;color:#7f7f7f'>";
        var startIndex = page * gCountPerPage + 1;
        html += (startIndex + " - " + (startIndex + engineerList.length - 1) + " (" + total + "人中)");
        html += "</div>";
        html += "<div style=&width:94%;height:1px;background:#d9d9d9;margin:12px 20px 0 20px'></div>";
      }

      for (var i=0;i<engineerList.length;i++) {
        var engineer = engineerList[i];
        if ((engineer.id == null) || (engineer.name == null) || (engineer.area == null) || (engineer.organization == null) || (engineer.profile == null) || (engineer.work == null) || (engineer.evaluate == null)) {
          continue;
        }
        html += "<div style='height:20px'></div>";
        html += "<table border='0' cellspacing='0' style='width:100%'>";
        html += "<tr>";
        html += "<td style='width:50px'></td>";
        // 画像・名前・プロフィール
        html += "<td>";
        html += "<table border='0' cellspacing='0'>";
        html += "<tr>";
        // 画像
        html += "<td>";
        html += ("<a href='engineerdetail.html?id=" + engineer.id + "'>");
        html += ("<img src='data/img/user/" + engineer.id + ".png' style='width:70px' onerror='this.src=\"img/no_img.png\";'>");
        html += "</a>";
        html += "</td>";
        html += "<td style='width:14px'></td>";
        // 名前・プロフィール
        html += "<td>";
        html += "<div style='font-size:14px;font-weight:bold'>";
        html += ("<a href='engineerdetail.html?id=" + engineer.id + "'>");
        html += engineer.name;
        html += "</a>";
        html += "</div>";
        html += "<div style='font-size:10px;color:#777;margin-top:3px'>";
        html += (engineer.area + " | " + organizationWord(engineer.organization));
        html += "</div>";
        html += "</td>";
        html += "</tr>";
        html += "</table>";
        html += "<div style='margin:10px 20px 0 0;font-size:12px;color:#666;'>";
        html += engineer.profile;
        html += "</div>";
        html += "</td>";
        html += "<td style='width:10px;height:10px'>";
        html += "<div style='width:100%;height:100%;background-color: #fff;background-image: radial-gradient(#bfbfbf 20%, transparent 20%);background-size:10px 10px;'></div>";
        html += "</td>";
        // 実績
        html += "<td style='width:100px;text-align:center;vertical-align:middle'>";
        html += "<div style='line-height:30px;font-size:14px;font-weight:bold;'>";
        html += "実績";
        html += "</div>";
        html += "<div style='line-height:50px;'>";
        html += ("<a href='engineerdetail.html?id=" + engineer.id + "' style='font-size:18px;font-weight:bold;color:#1fcba9'>");
        html += engineer.work;
        html += "</a></div>";
        html += "</td>";
        html += "<td style='width:10px;height:10px'>";
        html += "<div style='width:100%;height:100%;background-color: #fff;background-image: radial-gradient(#bfbfbf 20%, transparent 20%);background-size:10px 10px;'></div>";
        html += "</td>";
        // 評価
        html += "<td style='width:100px;text-align:center'>";
        html += "<div style='line-height:30px;font-size:14px;font-weight:bold;margin-top:20px'>";
        html += "評価";
        html += "</div>";
        html += "<div style='height:5px'></div>";
        html += "<div style='line-height:30px;font-size:16px;font-weight:bold;'>";
        html += evaluateValue(engineer.evaluate);
        html += "</div>";
        html += "<div style='height:35px'>";
        if (engineer.evaluate < 5)        {html += "<img src='img/star_empty.png' style='width:10px'>";}
        else if (engineer.evaluate < 10)  {html += "<img src='img/star_half.png' style='width:10px'>";}
        else                              {html += "<img src='img/star_full.png' style='width:10px'>";}
        if (engineer.evaluate < 15)       {html += "<img src='img/star_empty.png' style='width:10px'>";}
        else if (engineer.evaluate < 20)  {html += "<img src='img/star_half.png' style='width:10px'>";}
        else                              {html += "<img src='img/star_full.png' style='width:10px'>";}
        if (engineer.evaluate < 25)       {html += "<img src='img/star_empty.png' style='width:10px'>";}
        else if (engineer.evaluate < 30)  {html += "<img src='img/star_half.png' style='width:10px'>";}
        else                              {html += "<img src='img/star_full.png' style='width:10px'>";}
        if (engineer.evaluate < 35)       {html += "<img src='img/star_empty.png' style='width:10px'>";}
        else if (engineer.evaluate < 40)  {html += "<img src='img/star_half.png' style='width:10px'>";}
        else                              {html += "<img src='img/star_full.png' style='width:10px'>";}
        if (engineer.evaluate < 45)       {html += "<img src='img/star_empty.png' style='width:10px'>";}
        else if (engineer.evaluate < 50)  {html += "<img src='img/star_half.png' style='width:10px'>";}
        else                              {html += "<img src='img/star_full.png' style='width:10px'>";}
        html += "</div>";
        html += "</td>";
        html += "<td style='width:50px'></td>";
        html += "</tr>";
        html += "</table>";
        html += "<div style='height:10px'></div>";

        html += "<div style='width:94%;height:1px;background:#d9d9d9;margin:12px 20px 0 20px'></div>";
      }

      if (engineerList.length == 0) {
        html += "<div style='width:90%;height:280px;color:#ccc;font-size:18px;margin:70px 0 0 40px'>";
        html += "該当するエンジニアが見つかりません";
        html += "</div>";
      }

      // ページング
      html += "<div style='width:100%;margin:50px 0 40px 0'>"
      html += "<table border='0' cellspacing='0' style='margin:0 auto'>";
      html += "<tr>";

      var totalPage = Math.ceil(total / gCountPerPage);

      for (var i=0;i<totalPage;i++) {
        html += "<td style='text-align:center'>";
        if (i == page) {
          html += "<div style='border-radius:20px;-webkit-border-radius:20px;-moz-border-radius:20px;background:#505363;width:40px;height:40px;margin:0 auto;text-align:center;line-height:40px;color:#fff;font-size:12px;font-weight:bold'>";
          html += i + 1;
          html += "</div>";
        } else {
          html += ("<a href='javascript:onClickPage(" + i + ")'>");
          html += "<div style='border-radius:20px;-webkit-border-radius:20px;-moz-border-radius:20px;background:#f0f0f0;width:40px;height:40px;margin:0 auto;text-align:center;line-height:40px;color:#4da44d;font-size:12px;font-weight:bold'>";
          html += i + 1;
          html += "</div>";
          html += "</a>";
        }
        html += "</td>";

        if (i != totalPage - 1) {
          html += "<td style='width:6px'></td>";
        }
      }

      html += "</tr>";
      html += "</table>";
      html += "</div>";

      document.getElementById("contents_td").innerHTML = html;
    }

    function onClickOrganization(index) {

      for (var i=0;i<3;i++) {
        if (index == i){
          document.getElementById(("organizationImg" + i)).src = "img/check_on.png";
          document.getElementById(("organizationText" + i)).style.color = "#1fcba9";
        } else {
          document.getElementById(("organizationImg" + i)).src = "img/check_off.png";
          document.getElementById(("organizationText" + i)).style.color = "#bfbfbf";
        }
      }

      gOrganization = index;
      gPage = 0;
      fetch();
    }

    function onClickCost(index) {

      for (var i=0;i<5;i++) {
        if (index == i){
          document.getElementById(("costImg" + i)).src = "img/check_on.png";
          document.getElementById(("costText" + i)).style.color = "#1fcba9";
        } else {
          document.getElementById(("costImg" + i)).src = "img/check_off.png";
          document.getElementById(("costText" + i)).style.color = "#bfbfbf";
        }
      }

      gCost = index;
      gPage = 0;
      fetch();
    }

    function onClickWork(index) {

      for (var i=0;i<6;i++) {
        if (index == i){
          document.getElementById(("workImg" + i)).src = "img/check_on.png";
          document.getElementById(("workText" + i)).style.color = "#1fcba9";
        } else {
          document.getElementById(("workImg" + i)).src = "img/check_off.png";
          document.getElementById(("workText" + i)).style.color = "#bfbfbf";
        }
      }

      gWork = index;
      gPage = 0;
      fetch();
    }

    function onClickPage(index) {
      gPage = index;
      fetch();
    }

    function didEditKeyword(keyCode) {
      if (keyCode == 13) {
        gKeyword = document.getElementById("keyword").value;
        fetch();
      }
    }
  </script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110054488-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110054488-2');
  </script>

</head>
<body>

  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.10";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

  <!-- ヘッダ -->
  <div style="top:0px;width:100%;height:50px;position:fixed;z-index:1;background:#fff">
    <table border="0" cellspacing="0" style="width:100%;height:100%">
      <tr>
        <td style="width:50px"></td>
        <td style="text-align:center;vertical-align:middle;width:50px;height:100%;background:#262626">
          <span style="color:#fff;font-size:18px">E</span>
        </td>
        <td style="width:170px;text-align:center">
          <a href="index.html" style="font-size:12px;font-weight:bold;">アプリファクトリー</a>
        </td>
        <td style="width:1px;padding:13px 0">
          <div style="width:100%;height:100%;background:#262626;"></div>
        </td>
        <td style="width:120px;text-align:center">
          <a href="engineer.html" style="font-size:12px;font-weight:bold;">Engineers.</a>
        </td>
        <td style="width:90px;text-align:center">
          <a href="gallery.html" style="font-size:12px;font-weight:bold;">Gallery.</a>
        </td>
        <td style="background:#fff;text-align:right">
          <table border="0" cellspacing="0" style="margin:0 0 0 auto">
            <tr>
              <td>
                <td style="">
                  <div class="fb-like" data-href="http://appfac.net/" data-layout="button" data-action="like" data-size="small" data-show-faces="false" data-share="false"></div>
                </td>
                <td style="width:14px"></td>
                <td style="">
                  <a href="https://twitter.com/share" class="twitter-share-button"></a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=/*p+'://platform.twitter.com/widgets.js'*/'widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </td>
                <td style="width:20px"></td>
                <td>
                  <a href="estimate.html?target=all">
                    <div style="border-radius:17px;-webkit-border-radius:17px;-moz-border-radius:17px;background:#ff6347;width:90px;height:30px;line-height:30px;font-size:10px;font-weight:bold;color:#fff;text-align:center">
                      一括見積もり
                    </div>
                  </a>
                </td>
                <td style="width:20px"></td>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </div>

  <!-- コンテンツ -->
  <table border="0" cellspacing="0" style="width:100%;height:100%;overflow;hidden;">
    <tr>
      <td style="width:220px;background:#262626;vertical-align:top;color:#fff;">
        <table border="0" cellspacing="0" style="margin:80px 0 0 20px">
          <tr>
            <td style="width:7px;background:#ffc32e"></td>
            <td style="width:8px"></td>
            <td style="font-size:14px;color:#bfbfbf">
              フリーワード検索
            </td>
          </tr>
        </table>

        <div style="height:12px"></div>
        <div style="margin:0 auto;text-align:center;position:relative">
          <input type="text" id="keyword" onkeypress="javascript:didEditKeyword(event.keyCode)" style="border-radius:12px;-webkit-border-radius:12px;-moz-border-radius:12px;padding:0 24px 0 10px;width:180px;height:24px;font-size:10px">
          <img src="img/glass.png" style="position:absolute;top:4px;right:32px;width:16px;pointer-events:none">
        </div>

        <table border="0" cellspacing="0" style="margin:40px 0 0 20px">
          <tr>
            <td style="width:7px;background:#ffc32e"></td>
            <td style="width:8px"></td>
            <td style="font-size:14px;color:#bfbfbf">
              絞り込み条件
            </td>
          </tr>
        </table>

        <!-- 個人/法人 -->
        <div style="font-size:14px;font-weight:bold;color:#bfbfbf;margin:20px 0 0 20px">
          法人/個人
        </div>
        <table border="0" cellspacing="0" style="margin:10px 0 0 28px">
          <tr>
            <td>
              <a href="javascript:onClickOrganization(0)">
                <img id="organizationImg0" src="img/check_on.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickOrganization(0)">
                <div id="organizationText0" style="padding:0 0 0 8px;font-size:12px;color:#1fcba9;">
                  指定なし
                </div>
              </a>
            </td>
            <td style="width:20px"></td>
            <td>
              <a href="javascript:onClickOrganization(1)">
                <img id="organizationImg1" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickOrganization(1)">
                <div id="organizationText1" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  法人
                </div>
              </a>
            </td>
          </tr>
          <tr><td style="height:6px"></td></tr>
          <tr>
            <td>
              <a href="javascript:onClickOrganization(2)">
                <img id="organizationImg2" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickOrganization(2)">
                <div id="organizationText2" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  個人
                </div>
              </a>
            </td>
          </tr>
        </table>

        <!-- 予算 -->
        <div style="font-size:14px;font-weight:bold;color:#bfbfbf;margin:20px 0 0 20px">
          予算
        </div>
        <table border="0" cellspacing="0" style="margin:10px 0 0 28px">
          <tr>
            <td>
              <a href="javascript:onClickCost(0)">
                <img id="costImg0" src="img/check_on.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickCost(0)">
                <div id="costText0" style="padding:0 0 0 8px;font-size:12px;color:#1fcba9;">
                  指定なし
                </div>
              </a>
            </td>
          </tr>
          <tr><td style="height:6px"></td></tr>
          <tr>
            <td>
              <a href="javascript:onClickCost(1)">
                <img id="costImg1" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickCost(1)">
                <div id="costText1" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  〜 100,000円
                </div>
              </a>
            </td>
          </tr>
          <tr><td style="height:6px"></td></tr>
          <tr>
            <td>
              <a href="javascript:onClickCost(2)">
                <img id="costImg2" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickCost(2)">
                <div id="costText2" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  100,000 〜 300,000円
                </div>
              </a>
            </td>
          </tr>
          <tr><td style="height:6px"></td></tr>
          <tr>
            <td>
              <a href="javascript:onClickCost(3)">
                <img id="costImg3" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickCost(3)">
                <div id="costText3" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  300,000 〜 1,000,000円
                </div>
              </a>
            </td>
          </tr>
          <tr><td style="height:6px"></td></tr>
          <tr>
            <td>
              <a href="javascript:onClickCost(4)">
                <img id="costImg4" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickCost(4)">
                <div id="costText4" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  1,000,000円 〜
                </div>
              </a>
            </td>
          </tr>
        </table>

        <!-- 実績 -->
        <div style="font-size:14px;font-weight:bold;color:#bfbfbf;margin:20px 0 0 20px">
          実績
        </div>
        <table border="0" cellspacing="0" style="margin:10px 0 0 28px">
          <tr>
            <td>
              <a href="javascript:onClickWork(0)">
                <img id="workImg0" src="img/check_on.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickWork(0)">
                <div id="workText0" style="padding:0 0 0 8px;font-size:12px;color:#1fcba9;">
                  指定なし
                </div>
              </a>
            </td>
            <td style="width:20px"></td>
            <td>
              <a href="javascript:onClickWork(1)">
                <img id="workImg1" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickWork(1)">
                <div id="workText1" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  10以上
                </div>
              </a>
            </td>
          </tr>
          <tr><td style="height:6px"></td></tr>
          <tr>
            <td>
              <a href="javascript:onClickWork(2)">
                <img id="workImg2" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickWork(2)">
                <div id="workText2" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  20以上
                </div>
              </a>
            </td>
            <td style="width:20px"></td>
            <td>
              <a href="javascript:onClickWork(3)">
                <img id="workImg3" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickWork(3)">
                <div id="workText3" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  30以上
                </div>
              </a>
            </td>
          </tr>
          <tr><td style="height:6px"></td></tr>
          <tr>
            <td>
              <a href="javascript:onClickWork(4)">
                <img id="workImg4" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickWork(4)">
                <div id="workText4" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  40以上
                </div>
              </a>
            </td>
            <td style="width:20px"></td>
            <td>
              <a href="javascript:onClickWork(5)">
                <img id="workImg5" src="img/check_off.png" style="width:14px">
              </a>
            </td>
            <td style="">
              <a href="javascript:onClickWork(5)">
                <div id="workText5" style="padding:0 0 0 8px;font-size:12px;color:#bfbfbf;">
                  50以上
                </div>
              </a>
            </td>
          </tr>
        </table>
        <div style="height:40px"></div>
      </td>

      <!-- エンジニアリスト -->
      <td id="contents_td" style="vertical-align:top;">
      </td>

    </tr>
  </table>

  <script type="text/javascript">
    fetch();
  </script>

</body>
</html>
