<html>
<head>
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta charset="utf-8">
  <meta name="keywords" content="見積もり,アプリ開発">
  <title>アプリファクトリー</title>
  <link rel="shortcut icon" href="img/icon.png" type="image/png">
  <style>
    body {
      background: #fff;
    }
    body, div, span, td {
      margin: 0;
      padding: 0;
      font-family: "ヒラギノ角ゴ Pro", "Hiragino Kaku Gothic Pro",Lucida Grande,"メイリオ", Meiryo, Tahoma, Verdana, Osaka, "ＭＳ Ｐゴシック", "MS PGothic", sans-serif;
      font-size: 14px;
      color: #333;
    }
    a {
      text-decoration: none;
      color: #333;
    }
    input[type="text"] {
      border: 1px solid #ddd;
      border-radius:6px;
      -webkit-border-radius:6px;
      -moz-border-radius:6px;
      padding: 0 10px;
    }

    input[type="text"]:focus {
      outline: 0;
      border-color: orange;
    }
  </style>

  <script src="common.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script type="text/javascript">

    var gIosSelected = true;
    var gAndroidSelected = true;
    var gFunctionSelected = [false, false, false, false, false,
                            false, false, false, false, false];
    var gAgreeTerms = false;

    function onClickIos() {

      if (gIosSelected) {
        gIosSelected = false;
        document.getElementById("check_ios").src = "img/check_off_gray.png";
      } else {
        gIosSelected = true;
        document.getElementById("check_ios").src = "img/check_on_gray.png";
      }
    }

    function onClickAndroid() {
      if (gAndroidSelected) {
        gAndroidSelected = false;
        document.getElementById("check_android").src = "img/check_off_gray.png";
      } else {
        gAndroidSelected = true;
        document.getElementById("check_android").src = "img/check_on_gray.png";
      }
    }

    function onClickFunction(index) {

      var element = document.getElementById("check_function_" + index);

      if (gFunctionSelected[index]) {
        gFunctionSelected[index] = false;
        element.src = "img/check_off_gray.png";
      } else {
        gFunctionSelected[index] = true;
        element.src = "img/check_on_gray.png";
      }
    }

    function onCheckTerms() {

      if (gAgreeTerms) {
        gAgreeTerms = false;
        document.getElementById("termsAgree").src = "img/check_off.png";
      } else {
        gAgreeTerms = true;
        document.getElementById("termsAgree").src = "img/check_on.png";
      }
    }

    function send() {

      var errorMessage = "";

      if (!gAgreeTerms) {
        errorMessage = "利用規約に同意していません";
      }
      var email = btoa(unescape(encodeURIComponent(document.getElementById("email").value)));
      if (email.length == 0) {
        errorMessage = "ご連絡先が未入力です";
      }

      if (errorMessage.length > 0) {
        swal({
          text: errorMessage,
          icon: "warning",
          dangerMode: true
        });
        return;
      }

      var target = "";
      var locationSplit = location.search.split("?target=");
      if (locationSplit.length >= 2) {
        target = locationSplit[1];
      }
      var purpose = btoa(unescape(encodeURIComponent(document.getElementById("purpose").value)));
      var description = btoa(unescape(encodeURIComponent(document.getElementById("description").value)));
      var ios = "0";
      if (gIosSelected) ios = "1";
      var android = "0";
      if (gAndroidSelected) android = "1";
      var chat = "0";
      if (gFunctionSelected[0]) chat = "1";
      var camera = "0";
      if (gFunctionSelected[1]) camera = "1";
      var movie = "0";
      if (gFunctionSelected[2]) movie = "1";
      var push = "0";
      if (gFunctionSelected[3]) push = "1";
      var map = "0";
      if (gFunctionSelected[4]) map = "1";
      var geofence = "0";
      if (gFunctionSelected[5]) geofence = "1";
      var settle = "0";
      if (gFunctionSelected[6]) settle = "1";
      var credit = "0";
      if (gFunctionSelected[7]) credit = "1";
      var user = "0";
      if (gFunctionSelected[8]) user = "1";
      var sns = "0";
      if (gFunctionSelected[9]) sns = "1";
      var notes = btoa(unescape(encodeURIComponent(document.getElementById("notes").value)));
      var email = btoa(unescape(encodeURIComponent(document.getElementById("email").value)));

      var url = "srv.php?command=estimate";
      url += ("&target=" + target);
      url += ("&purpose=" + purpose);
      url += ("&description=" + description);
      url += ("&ios=" + ios);
      url += ("&android=" + android);
      url += ("&chat=" + chat);
      url += ("&camera=" + camera);
      url += ("&movie=" + movie);
      url += ("&push=" + push);
      url += ("&map=" + map);
      url += ("&geofence=" + geofence);
      url += ("&settle=" + settle);
      url += ("&credit=" + credit);
      url += ("&user=" + user);
      url += ("&sns=" + sns);
      url += ("&notes" + notes);
      url += ("&email=" + email);

      httpPost(url, null, function(data) {
        try {
          var parsed = JSON.parse(data);
          if (parsed) {
            if (parsed.result == "0") {
              swal("送信が完了しました", "返信があるまでお待ちください", "success")
                .then((willDelete) => {
                  setTimeout(function() {
                    location.href = "index.html"
                  }, 100);
                });
              return;
            }
          }
        } catch(e) {}

        swal({
          text: "通信に失敗しました",
          icon: "warning",
          dangerMode: true
        });
      });
    }

  </script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110054488-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110054488-2');
  </script>

</head>
<body>

  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.10";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

  <!-- ヘッダ -->
  <div style="top:0px;width:100%;height:50px;position:fixed;z-index:1;background:#fff">
    <table border="0" cellspacing="0" style="width:100%;height:100%">
      <tr>
        <td style="width:50px"></td>
        <td style="text-align:center;vertical-align:middle;width:50px;height:100%;background:#262626">
          <span style="color:#fff;font-size:18px">E</span>
        </td>
        <td style="width:170px;text-align:center">
          <a href="index.html" style="font-size:12px;font-weight:bold;">アプリファクトリー</a>
        </td>
        <td style="width:1px;padding:13px 0">
          <div style="width:100%;height:100%;background:#262626;"></div>
        </td>
        <td style="width:120px;text-align:center">
          <a href="engineer.html" style="font-size:12px;font-weight:bold;">Engineers.</a>
        </td>
        <td style="width:90px;text-align:center">
          <a href="gallery.html" style="font-size:12px;font-weight:bold;">Gallery.</a>
        </td>
        <td style="width:100px;text-align:center">
          <a href="diagramlist.html" style="font-size:12px;font-weight:bold;">Diagram.</a>
        </td>
        <td style="background:#fff;text-align:right">
          <table border="0" cellspacing="0" style="margin:0 0 0 auto">
            <tr>
              <td>
                <td style="">
                  <div class="fb-like" data-href="http://appfac.net/" data-layout="button" data-action="like" data-size="small" data-show-faces="false" data-share="false"></div>
                </td>
                <td style="width:14px"></td>
                <td style="">
                  <a href="https://twitter.com/share" class="twitter-share-button"></a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </td>
                <td style="width:20px"></td>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </div>

  <!-- トップコンテンツ -->
  <div style="margin-top:50px;background:#f4f4f4;;width:100%;">
    <div style="height:30px"></div>
    <div style="margin:0 40px 0 40px;font-size:18px;font-weight:bold">
      お見積もり 入力フォーム
    </div>
    <div style="width:100d%;height:2px;margin:0 30px 0 30px;background:#333"></div>

    <div id="page_description" style="margin:10px 0 0 40px">
      登録中の開発者様に見積もり依頼を一斉に送信します。
    </div>

    <div style="margin:40px 80px 0 80px">
      <div style="font-size:12px;font-weight:bold">アプリの目的</div>
      <input id="purpose" type="text" style="width:100%;height:34px;margin-top:8px" placeholder="自社サービスの認知度向上のため">

      <div style="font-size:12px;font-weight:bold;margin-top:50px">アプリの概要</div>
      <input id="description" type="text" style="width:100%;height:34px;margin-top:8px" placeholder="自社製品情報をユーザに閲覧させ、コメントやいいねの投稿を行う。また、ユーザー同士のチャットにより、製品に対する意見を募る。">

      <div style="font-size:12px;font-weight:bold;margin-top:50px">プラットフォーム</div>
      <table border="0" cellspacing="0" style="margin-top:8px">
        <tr>
          <td>
            <a href="javascript:onClickIos()">
              <img id="check_ios" src="img/check_on_gray.png" style="width:18px">
            </a>
          </td>
          <td style="width:12px"></td>
          <td>
            <a href="javascript:onClickIos()">
              iOS
            </a>
          </td>
          <td style="width:40px"></td>
          <td>
            <a href="javascript:onClickAndroid()">
              <img id="check_android" src="img/check_on_gray.png" style="width:18px">
            </a>
          </td>
          <td style="width:12px"></td>
          <td>
            <a href="javascript:onClickAndroid()">
              Android
            </a>
          </td>
        </tr>
      </table>

      <div style="font-size:12px;font-weight:bold;margin-top:50px">機能</div>
      <table border="0" cellspacing="0" style="width:80%;margin-top:8px">
        <tr>
          <!-- チャット -->
          <td><a href="javascript:onClickFunction(0)"><img id="check_function_0" src="img/check_off_gray.png" style="width:18px" /></a></td>
          <td style="width:4px"></td>
          <td><a href="javascript:onClickFunction(0)">チャット</a></td>
          <td style="width:20px"></td>
          <!-- カメラ -->
          <td><a href="javascript:onClickFunction(1)"><img id="check_function_1" src="img/check_off_gray.png" style="width:18px" /></a></td>
          <td style="width:4px"></td>
          <td><a href="javascript:onClickFunction(1)">カメラ</a></td>
          <td style="width:20px"></td>
          <!-- 動画 -->
          <td><a href="javascript:onClickFunction(2)"><img id="check_function_2" src="img/check_off_gray.png" style="width:18px" /></a></td>
          <td style="width:4px"></td>
          <td><a href="javascript:onClickFunction(2)">動画</a></td>
          <td style="width:20px"></td>
          <!-- Push -->
          <td><a href="javascript:onClickFunction(3)"><img id="check_function_3" src="img/check_off_gray.png" style="width:18px" /></a></td>
          <td style="width:4px"></td>
          <td><a href="javascript:onClickFunction(3)">Push通知</a></td>
        </tr>
        <tr><td style="height:10px"></td></tr>
        <tr>
          <!-- 地図 -->
          <td><a href="javascript:onClickFunction(4)"><img id="check_function_4" src="img/check_off_gray.png" style="width:18px" /></a></td>
          <td style="width:4px"></td>
          <td><a href="javascript:onClickFunction(4)">地図</a></td>
          <td style="width:20px"></td>
          <!-- ジオフェンス -->
          <td><a href="javascript:onClickFunction(5)"><img id="check_function_5" src="img/check_off_gray.png" style="width:18px" /></a></td>
          <td style="width:4px"></td>
          <td><a href="javascript:onClickFunction(5)">ジオフェンス</a></td>
          <td style="width:20px"></td>
          <!-- アプリ課金 -->
          <td><a href="javascript:onClickFunction(6)"><img id="check_function_6" src="img/check_off_gray.png" style="width:18px" /></a></td>
          <td style="width:4px"></td>
          <td><a href="javascript:onClickFunction(6)">アプリ課金</a></td>
          <td style="width:20px"></td>
          <!-- クレカ -->
          <td><a href="javascript:onClickFunction(7)"><img id="check_function_7" src="img/check_off_gray.png" style="width:18px" /></a></td>
          <td style="width:4px"></td>
          <td><a href="javascript:onClickFunction(7)">クレジット決済</a></td>
          <td style="width:20px"></td>
        </tr>
        <tr><td style="height:10px"></td></tr>
        <tr>
          <!-- ユーザ管理 -->
          <td><a href="javascript:onClickFunction(8)"><img id="check_function_8" src="img/check_off_gray.png" style="width:18px" /></a></td>
          <td style="width:4px"></td>
          <td><a href="javascript:onClickFunction(8)">ユーザー管理</a></td>
          <td style="width:20px"></td>
          <!-- SNS -->
          <td><a href="javascript:onClickFunction(9)"><img id="check_function_9" src="img/check_off_gray.png" style="width:18px" /></a></td>
          <td style="width:4px"></td>
          <td><a href="javascript:onClickFunction(9)">SNS連携/認証</a></td>
          <td style="width:20px"></td>
        </tr>
      </table>

      <div style="font-size:12px;font-weight:bold;margin-top:50px">備考</div>
      <input id="notes" type="text" style="width:100%;height:34px;margin-top:8px" placeholder="年内にリリースしたい">

      <div style="font-size:12px;font-weight:bold;margin-top:50px">ご連絡先</div>
      <input id="email" type="text" style="width:100%;height:34px;margin-top:8px" placeholder="電話番号、メールアドレスなど">
    </div>

    <table border="0" cellspacing="0" style="margin:60px auto 0 auto">
      <tr>
        <td>
          <a href="javascript:onCheckTerms()">
            <img id="termsAgree" src="img/check_off.png" style="width:18px">
          </a>
        </td>
        <td style="width:6px"></td>
        <td>
          <a href="terms.html" style="color:#1fcba9;font-weight:bold;font-size:12px">
            利用規約
          </a>
          <span style="font-size:12px">に同意する</span>
        </td>
      </tr>
    </table>

    <div style="height:10px"></div>

    <a href="javascript:send()">
      <div style="width:170px;height:40px;margin:0 auto;border-radius:20px;-webkit-border-radius:20px;-moz-border-radius:20px;font-size:12px;font-weight:bold;background:#1fcba9;line-height:40px;text-align:center;color:#fff">
        送信する
      </div>
    </a>

    <div style="height:100px"></div>

  </div>

  <!-- フッター -->
  <div style="margin:40px auto 0 auto;width:90%;background-image:radial-gradient(#e0e0e0 20%, transparent 20%);background-size:10px 10px;">
    <div style="height:30px"></div>
    <table border="0" cellspacing="0" style="margin:0 auto;width:95%">
      <tr>
        <td style="width:33%;text-align:center;vertical-align:top">
          <div style="font-size:14px;font-weight:bold">
            依頼する
          </div>
          <div style="margin-top:10px">
            <a href="engineer.html" style="font-size:12px;color:#7f7f7f">
              開発者を探す
            </a>
          </div>
          <div style="margin-top:4px">
            <a href="gallery.html" style="font-size:12px;color:#7f7f7f">
              デザインから選ぶ
            </a>
          </div>
        </td>
        <td style="width:33%;text-align:center;;vertical-align:top">
          <div style="font-size:14px;font-weight:bold">
            仕事を受ける
          </div>
          <div style="margin-top:10px">
            <a href="join.html" style="font-size:12px;color:#7f7f7f">
              開発者として登録する
            </a>
          </div>
        </td>
        <td style="width:33%;font-size:14px;font-weight:bold;text-align:center;vertical-align:top">
          <div style="font-size:14px;font-weight:bold">
            運営会社
          </div>
          <div style="margin-top:10px">
            <a href="http://lfg.co.jp/" style="font-size:12px;color:#7f7f7f;font-weight:normal">
              会社ホームページ
            </a>
          </div>
          <div style="margin-top:4px">
            <a href="http://lfg.co.jp/company.html" style="font-size:12px;color:#7f7f7f;font-weight:normal">
              会社概要
            </a>
          </div>
          <div style="margin-top:4px">
            <a href="terms.html" style="font-size:12px;color:#7f7f7f;font-weight:normal">
              利用規約
            </a>
          </div>
        </td>
      </tr>
    </table>
    <div style="height:26px"></div>
  </div>

  <div style="margin:20px auto 30px auto;text-align:center;width:100%;font-size:12px">
    copyright&copy; Leapfrog Inc. all rights reserved.
  </div>

  <script type="text/javascript">

    var locationSplit = location.search.split("?target=");
    if (locationSplit.length >= 2) {
      target = locationSplit[1];
      if (target == "all") {
        document.getElementById("page_description").innerHTML = "登録中の開発者様に見積もり依頼を一斉に送信します。";
      } else {
        getUserDetail(target);
      }
    }

    function getUserDetail(target) {
      var url = "srv.php?command=getengineerdetail&id=" + target;
      httpPost(url, null, function(data) {
        var parsed = null;
        try {
          parsed = JSON.parse(data);
          if (!parsed) {
            return;
          }
        } catch(e) {
          return;
        }
        if ((parsed.id == null) || (parsed.name == null)) {
          return;
        }
        document.getElementById("page_description").innerHTML = parsed.name + "様に見積もり依頼を送信します。";
      });
    }

  </script>

</body>
</html>
